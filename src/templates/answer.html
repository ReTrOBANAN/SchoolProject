<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', path='/questions.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', path='/answer.css') }}">
    <script src="{{ url_for('static', path='js/answerRender.js') }}" defer></script>
    <script src="{{ url_for('static', path='js/answerEvents.js') }}" defer></script>
    <title>Ответ</title>
</head>
<body>
    <div class="header">
        <header class="header-inner container">
            <div class="header-logo">
                Наш логотип
            </div>
            <input type="text" id="search" class="input search-input" placeholder="Может вопрос уже задан?">
            <div class="header-actions">
                {% if username %}
                    <button id="create" class="btn header-actions-create">Создать вопрос</button>
                    <a href="/profile/{{ username }}" class="link">{{ name }}</a>
                {% else %}
                    <a href="/login" class="link">Войти</a>
                {% endif %}
            </div>
        </header>
    </div>
    <main>
        <section class="question-container container">
            <a href="/" class="arrow-back-answer">
                <img src="{{ url_for('static', path='imgs/arrow.svg') }}" alt="">
            </a>
            <div class="question">
                <button class="edit-btn" id="editBtn">
                    <img src="{{ url_for('static', path='imgs/more.svg') }}" alt="">
                </button>
                <div class="question-edit-container" id="editContainer">
                    {% if username == result[0] %}
                    <button type="button" class="delete-btn" id="deleteQuestionBtn">
                        <img src="{{ url_for('static', path='imgs/delete.svg') }}" alt="">
                        Удалить
                    </button>
                    <button type="submit" class="delete-btn" id="changeQuestionBtn">
                        <img src="{{ url_for('static', path='imgs/edit.svg') }}" alt="">
                        Изменить
                    </button>
                    {% else %}
                    <button type="submit" class="delete-btn" id="reportQuestionBtn">
                        <img src="{{ url_for('static', path='imgs/flag.svg') }}" alt="">
                        Пожаловаться
                    </button>
                    {% endif %}
                </div>
                <div class="questions-item-header">
                    <div>{{ result[1] }} ({{result[0]}})</div>
                    <div>{{ result[2] }}</div>
                    <div>{{ result[3] }} класс</div>
                    <div id="questionTime" data-question-time="{{ result[6] }}"></div>
                </div>
                <div class="question-text">
                    {{ result[4] }}
                </div>
            </div>
            <div class="answers">
                <h1 class="answers-title">Ответы</h1>
                {% if username %}
                <div class="questions-content-item">
                    <form action="/addcomment" method="post" class="answer-textarea">
                        <label for="questionText">Хотите ответить?</label>
                        <input type="hidden" value="{{ result[5] }}" name="id">
                        <textarea class="form-text-textarea" name="comment" id="questionText"></textarea>
                        <button type="submit" class="answer-btn btn">Ответить</button>
                    </form>                  
                </div>
                {% else %}
                <div class="question answer-login">
                    <p>Хотите ответить? <a href="/login" class="link">Войти</a></p>
                </div>
                {% endif %}
                <ul id="answerList" class="questions-content-list" data-questionid="{{ result[5] }}" data-username="{{ username }}">
                </ul>
            </div>
        </section>
        <div class="overlay" id="overlayCreate">
            <section class="create">
                <button class="create-close-btn" id="close">
                    <img src="{{ url_for('static', path='imgs/close.svg') }}" alt="">
                </button>
                <form action="/doadd" method="post" class="create-form">
                    <div class="create-form-text">
                        <label for="questionText">Какой у вас вопрос?</label>
                        <textarea class="form-text-textarea" name="description" id="questionText" minlength="1" required></textarea>
                    </div>
                    <div class="create-form-section">
                        <select class="item-filter-subject input" id="subject-create" name="subject">
                            <option value="Математика" selected>Математика</option>
                            <option value="Русский язык">Русский язык</option>
                            <option value="Английский язык">Английский язык</option>
                            <option value="Биология">Биология</option>
                            <option value="Физика">Физика</option>
                        </select>
                        <select class="item-filter-grade input" id="grade-create" name="grade">
                            <option value="1" selected>1 класс</option>
                            <option value="2">2 класс</option>
                            <option value="3">3 класс</option>
                            <option value="4">4 класс</option>
                            <option value="5">5 класс</option>
                            <option value="6">6 класс</option>
                            <option value="7">7 класс</option>
                            <option value="8">8 класс</option>
                            <option value="9">9 класс</option>
                            <option value="10">10 класс</option>
                            <option value="11">11 класс</option>
                        </select>
                    </div>
                    <button type="submit" class="btn">Создать вопрос</button>
                </form>
            </section>
        </div>
        <div class="overlay" id="overlaySureQuestionDelete">
            <section class="sure-delete">
                <button class="create-close-btn" id="sureCloseQuestionBtn">
                    <img src="{{ url_for('static', path='imgs/close.svg') }}" alt="">
                </button>
                <div class="sure-delete-title">Вы уверены что хотите удалить вопрос?</div>
                <div class="sure-delete-btns">
                    <form action="/delete" method="post">
                        <input type="hidden" name="description" value='{{ result[4] }}'>
                        <input type="hidden" name="owner" value="{{ result[0] }}">
                        <input type="hidden" name="question_id" value="{{ result[5] }}">
                        <button type="submit" class="btn delete-sure">
                            Удалить
                        </button>
                    </form>
                    <button type="submit" class="btn" id="sureCancelQuestionBtn">
                        Отменить
                    </button>
                </div>
            </section>
        </div>

        <div class="overlay" id="overlaySureAnswerDelete">
            <section class="sure-delete">
                <button class="create-close-btn" id="sureCloseAnswerBtn">
                    <img src="{{ url_for('static', path='imgs/close.svg') }}" alt="">
                </button>
                <div class="sure-delete-title">Вы уверены что хотите удалить ответ?</div>
                <div class="sure-delete-btns">
                    <form action="/delete_answer" method="post">
                        <input id="deleteAnswerOwner" type="hidden" name="owner" value="">
                        <input id="deleteAnswerId" type="hidden" name="id" value="">
                        <input id="deleteAnswerQuestionId" type="hidden" name="questionId" value="">
                        <button type="submit" class="btn delete-sure">
                            Удалить
                        </button>
                    </form>
                    <button type="submit" class="btn" id="sureCancelAnswerBtn">
                        Отменить
                    </button>
                </div>
            </section>
        </div>
        
        <div class="overlay" id="overlayChangeQuestionContainer">
            <section class="create">
                <button class="create-close-btn" id="closeChangeQuestionContainerBtn">
                    <img src="{{ url_for('static', path='imgs/close.svg') }}" alt="">
                </button>
                <form action="/change" method="post" class="create-form">
                    <div class="create-form-text">
                        <label for="questionText">Что изменить?</label>
                        <input type="hidden" name="description" value='{{ result[4] }}'>
                        <input type="hidden" name="owner" value="{{ result[0] }}">
                        <input type="hidden" name="id" value="{{ result[5] }}">
                        <textarea class="form-text-textarea" name="new_description" id="questionText" minlength="1"></textarea>
                    </div>
                    <div class="create-form-section">
                        <select class="item-filter-subject input" name="subject">
                            <option value="Математика" selected>Математика</option>
                            <option value="Русский язык">Русский язык</option>
                            <option value="Английский язык">Английский язык</option>
                            <option value="Биология">Биология</option>
                            <option value="Физика">Физика</option>
                        </select>
                        <select class="item-filter-grade input" name="grade">
                            <option value="1" selected>1 класс</option>
                            <option value="2">2 класс</option>
                            <option value="3">3 класс</option>
                            <option value="4">4 класс</option>
                            <option value="5">5 класс</option>
                            <option value="6">6 класс</option>
                            <option value="7">7 класс</option>
                            <option value="8">8 класс</option>
                            <option value="9">9 класс</option>
                            <option value="10">10 класс</option>
                            <option value="11">11 класс</option>
                        </select>
                    </div>
                    <button type="submit" class="btn">
                        Изменить
                    </button>
                </form>
            </section>
        </div>

        <div class="overlay" id="overlayChangeAnswerContainer">
            <section class="create">
                <button class="create-close-btn" id="closeChangeAnswerContainerBtn">
                    <img src="{{ url_for('static', path='imgs/close.svg') }}" alt="">
                </button>
                <form action="/change" method="post" class="create-form">
                    <div class="create-form-text">
                        <label for="questionText">Что изменить?</label>
                        <input id="changeAnswerOwner" type="hidden" name="owner" value="">
                        <input id="changeAnswerId" type="hidden" name="id" value="">
                        <input id="changeAnswerQuestionId" type="hidden" name="questionId" value="">
                        <textarea class="form-text-textarea" name="new_description" id="questionText" minlength="1"></textarea>
                    </div>
                    <button type="submit" class="btn">
                        Изменить
                    </button>
                </form>
            </section>
        </div>
        
        <div class="overlay" id="overlayReportQuestionContainer">
            <section class="report">
                <button class="create-close-btn" id="closeReportQuestionContainerBtn">
                    <img src="{{ url_for('static', path='imgs/close.svg') }}" alt="">
                </button>
                <form action="" method="post" class="create-form">
                    <div class="report-title">Выберите причину жалобы</div>
                    
                    <input id="reportQuestionQuestionId" type="hidden" name="questionId" value="{{ result[5] }}">


                    

                    <label class="label-report">
                        <input type="radio" name="complaint_type" class="radio-report" value="spam" required>
                        Спам или реклама
                    </label>

                    <label class="label-report">
                        <input type="radio" name="complaint_type" class="radio-report" value="offensive">
                        Оскорбительное поведение
                    </label>

                    <label class="label-report">
                        <input type="radio" name="complaint_type" class="radio-report" value="false_info">
                        Ложная информация
                    </label>

                    <label class="label-report">
                        <input type="radio" name="complaint_type" class="radio-report" value="violence">
                        Пропаганда насилия
                    </label>

                    <label class="label-report">
                        <input type="radio" name="complaint_type" class="radio-report" value="other">
                        Другое
                    </label>
                    <button type="submit" class="btn report-submit-btn">
                        Пожаловаться
                    </button>
                </form>
            </section>
        </div>

        <div class="overlay" id="overlayReportAnswerContainer">
            <section class="report">
                <button class="create-close-btn" id="closeReportAnswerContainerBtn">
                    <img src="{{ url_for('static', path='imgs/close.svg') }}" alt="">
                </button>
                <form action="" method="post" class="create-form">
                    <div class="report-title">Выберите причину жалобы</div>

                    <input id="reportAnswerId" type="hidden" name="questionId" value="">
                    <input id="reportAnswerQuestionId" type="hidden" name="questionId" value="">


                    <label class="label-report">
                        <input type="radio" name="complaint_type" class="radio-report" value="spam" required>
                        Спам или реклама
                    </label>

                    <label class="label-report">
                        <input type="radio" name="complaint_type" class="radio-report" value="offensive">
                        Оскорбительное поведение
                    </label>

                    <label class="label-report">
                        <input type="radio" name="complaint_type" class="radio-report" value="false_info">
                        Ложная информация
                    </label>

                    <label class="label-report">
                        <input type="radio" name="complaint_type" class="radio-report" value="violence">
                        Пропаганда насилия
                    </label>

                    <label class="label-report">
                        <input type="radio" name="complaint_type" class="radio-report" value="other">
                        Другое
                    </label>
                    <button type="submit" class="btn report-submit-btn">
                        Пожаловаться
                    </button>
                </form>
            </section>
        </div>
    </main>
</body>
</html>
